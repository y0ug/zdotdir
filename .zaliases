#!/usr/bin/env zsh
#
# aliases - Set whatever shell aliases you want.
#
# References
# - https://medium.com/@webprolific/getting-started-with-dotfiles-43c3602fd789#.vh7hhm6th
# - https://github.com/webpro/dotfiles/blob/master/system/.alias
# - https://github.com/mathiasbynens/dotfiles/blob/master/.aliases
# - https://github.com/ohmyzsh/ohmyzsh/blob/master/plugins/common-aliases/common-aliases.plugin.zsh
#
# single character aliases - be sparing!
alias _=sudo
alias l=ls
alias g=git
alias c=pbcopy
alias p=pbpaste

alias pv='export PASTE=$(wl-paste)'
alias ctx="xargs files-content -R | c"
alias trdn="tr -d '\n'"
alias lastdlc="lastdl | tail -1 | trdn | c"

alias gs="git status"
alias ga="git add"
alias gcm="git commit -m"
alias gacm="git commit -a -m"
alias lg="lazygit"
alias tree="exa -T --group-directories-first --icons=auto --git-ignore"

alias gca="git diff --cached | aichat -r commit - | git commit -F - -e"
alias gcae="git diff --cached | aichat -r commit - | git commit -F -"
alias gacae="git add -u && gcae"
alias gaca="git add -u && gca"

# mask built-ins with better defaults
alias vi=vim

# more ways to ls
alias ll='ls -lh'
alias la='ls -lAh'
alias ldot='ls -ld .*'

if command -v eza >/dev/null 2>&1; then
  alias eza="eza --group-directories-first --hyperlink --icons=auto"
  alias exa="eza --group-directories-first --hyperlink --icons=auto"
  alias ls="eza"
  alias ll="eza -l -g --time-style=long-iso"
  alias l="eza -F -a"
  alias la="eza -aa"
  alias llar="\\eza -la --sort=modified"
  _ls=_eza

  # alias lastdl="\\eza -1 --absolute --sort modified ~/Downloads | tail -1  | tr -d '\n'"
  alias lastdl="\\eza -1 --absolute --sort modified ~/Downloads | tail -1 | tr -d \"'\""
  alias lastdl="\\eza -1 --absolute --sort modified ~/Downloads | tr -d \"'\""
fi

# fix common typos
alias quit='exit'
alias cd..='cd ..'

# tar
alias tarls="tar -tvf"
alias untar="tar -xf"

# find
alias fdf='fd -type f -name'
alias fdd='fd -type d -name'

alias rgv="rg --pretty --vimgrep -H"

# url encode/decode
alias urldecode='python3 -c "import sys, urllib.parse as ul; \
    print(ul.unquote_plus(sys.argv[1]))"'
alias urlencode='python3 -c "import sys, urllib.parse as ul; \
    print (ul.quote_plus(sys.argv[1]))"'

# misc
alias zshrc='${EDITOR:-vim} "${ZDOTDIR:-$HOME}"/.zshrc'
alias zbench='for i in {1..10}; do /usr/bin/env time zsh -lic exit; done'
alias zdot='cd ${ZDOTDIR:-~}'

# (($ + commands[nvim])) && alias vim=nvim

# # Check and set pbcopy/pbpaste aliases based on available tools
# if command -v pbcopy >/dev/null 2>&1; then
#   # macOS already has pbcopy/pbpaste
#   :
# elif command -v xclip >/dev/null 2>&1; then
#   # Use xclip if available
#   alias pbcopy='xclip -selection clipboard'
#   alias pbpaste='xclip -selection clipboard -o'
# elif command -v wl-copy >/dev/null 2>&1; then
#   # Use Wayland clipboard if available
#   alias pbcopy='wl-copy'
#   alias pbpaste='wl-paste'
# elif [[ "$TERM" == *"xterm"* ]] || [[ "$TERM" == *"screen"* ]] || [[ -n "$TMUX" ]]; then
#   # Use OSC 52 escape sequence for terminals that support it
#   function pbcopy() {
#     local data=$(cat)
#     printf "\033]52;c;$(printf "%s" "$data" | base64)\a"
#   }
#   function pbpaste() {
#     echo "pbpaste via OSC is not supported directly - clipboard data can only be sent TO terminal"
#   }
# else
#   # Fallback message if no clipboard tool is available
#   function pbcopy() {
#     echo "No clipboard tool available"
#     return 1
#   }
#   function pbpaste() {
#     echo "No clipboard tool available"
#     return 1
#   }
# fi
#
function vpn() {
  eval $(bwc.py --fields=username,password airvpn)
  local cmd="eddie-cli -login=$BW_USERNAME -password=$BW_PASSWORD -connect $@"
  NIXPKGS_ALLOW_INSECURE=1 nix-shell -p eddie --impure --command "$cmd"
}

# vim: ft=zsh sw=2 ts=2 et
